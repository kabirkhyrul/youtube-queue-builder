async function s(e=null){try{let o=e;if(!o){const{videos:t=[]}=await chrome.storage.local.get("videos");o=t}const i=(o==null?void 0:o.map(t=>t.videoId).filter(Boolean))||[];if(!i.length)throw new Error("No videos to queue.");const r=`https://www.youtube.com/watch_videos?video_ids=${i.join(",")}`;return await chrome.tabs.create({url:r}),{success:!0,count:i.length,url:r}}catch(o){return{success:!1,error:o.message}}}chrome.action.onClicked.addListener(async e=>{e.id&&e.windowId&&await chrome.sidePanel.open({windowId:e.windowId})});chrome.runtime.onMessage.addListener((e,o,i)=>{if(e.action==="test")i({success:!0,message:"Background script is working"});else if(e.action==="videosFound")chrome.storage.local.set({videos:e.videos}),i({success:!0});else if(e.action==="addCurrentToQueue")return s(e.videos).then(i),!0});
